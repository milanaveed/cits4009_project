---
title: "CITS4009 - Project 1"
author: "Mila Zhang (22756463)"
output: 
  html_document:
    toc: true
    toc_depth: 3
    toc_float: true
runtime: shiny
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Introduction to the YouTube dataset

This project analises the data set of [Global YouTube Statistics 2023](https://www.kaggle.com/datasets/nelgiriyewithana/global-youtube-statistics-2023) and it can be obtained from the Kaggle platform.

This data collection provides an opportunity to analyse and uncover valuable insights from leading YouTubers. Packed with comprehensive details on high-profile creators, this dataset serves as a treasure for those breaking into content creation, enthusiastic about data, and anyone interested in the constantly changing landscape of online content.

# Performing ETL and setting up for plotting
## Loading libraries
```{r message=FALSE, warning=FALSE}
library(ggplot2)
library(gridExtra)
library(dplyr)
library(ggthemes)
library(numform)
library(treemapify)
library(timeDate)
library(lubridate)
library(reshape2)
library(ca)
```

## Setting up a plotting theme
```{r}
color_theme <- theme_few() + # Theme based on S. Few's "Practical Rules for Using Color in Charts"
                  theme(plot.title = element_text(color = "darkred")) +
                  theme(strip.text.x = element_text(size = 14, colour = "#202020")) +
                  theme(plot.margin=margin(10,30,10,30))
```

## Extracting data
```{r}
data.path <- './data/youtube_UTF_8.csv'
df <- read.csv(data.path)
```

## Data Overview
### Using head() to analyze the data
```{r}
head(df)
```

### Using summary() to analyze the data
```{r}
summary(df)
```

### Using str() to analyze the data??

## Transforming data
Missing/invalid/sentinel/outlier data treatment, discretization, normalisation, log-scales and etc.
### Cleaning data

### Filtering data

## Loading data
Save the cleaned and transformed data
```{r}
write.csv(df_filtered, "./data/youtube_data_cleaned")
```

# EDA: Content strategy analysis


# EDA: Earnings analysis

## Distribution of Earnings
Since "lowest_monthly_earnings" and "highest_monthly_earnings" are right-skewed variables, we will use two histograms to analyze each of the distribution: one with a log10 scale and one with a truncated linear scale.
```{r}
df_finite <- df %>% filter(is.finite(lowest_monthly_earnings))

p1 <- ggplot(df, aes(x = lowest_monthly_earnings)) +
  geom_histogram(aes(y=..density..), binwidth= 0.05, fill = "grey") +
  geom_density(color='darkred')+
  scale_x_continuous(trans='log10')+
  ggtitle("Distribution of Lowest Monthly Earnings (Log-scale)") +
  color_theme

p2 <- ggplot(df, aes(x = lowest_monthly_earnings)) +
  geom_histogram(aes(y=..density..), binwidth=500, fill = "grey") +
  geom_density(color='darkred')+
  xlim(0, boxplot.stats(df$lowest_monthly_earnings)$stats[5]) + 
  ylim(0, 0.00006) +
  ggtitle("Distribution of Lowest Monthly Earnings") +
  color_theme

grid.arrange(p1, p2, ncol=1)
```




```{r}
ggplot(df) + geom_histogram(mapping=aes(x=subscribers)) + xlim(boxplot.stats(df$subscribers)$stats[1], boxplot.stats(df$subscribers)$stats[4]) + color_theme
```


# EDA: Geospatial information


# EDA: Trend by time







# Code for Shiny App
```{r}

```
